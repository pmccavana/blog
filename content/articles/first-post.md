Title: My Website First Post
Author: Pat McCavana
Date: 2020-03-13 12:30
Category: Portfolio
Tags: python, markdown, pelican
Slug: my-first-post

# Pelican

## Creating A Project Skeleton

Let's begin by creating a new folder called blog. Then create two new folders inside the blog folder called output and source as shown below. Our Pelican project will be stored in the source folder. The static website generated by Pelican will be placed in the output folder.

```
blog
  └── output
  └── source
```

Next we need to install Pelican and Markdown. Markdown is a plain-text markup language we will be using to write the content for our website. Open the command line and type the following commands:

```
pip install pelican
pip install markdown
```

With our basic file structure in-place and Pelican/Markdown installed we are now ready to create our Pelican project. Navigate to the source folder using the command line and type:

```
pelican-quickstart
```

Pelican starts by asking us a series of interview questions to customize our website.

```
Where do you want to create your new web site? [.] .
What will be the title of this web site? Pat McCavana Dosimetry Blog
Who will be the author of this web site? Pat McCavana
What will be the default language of this web site? [English] en
Do you want to specify a URL prefix? e.g., https://example.com   (Y/n) n
Do you want to enable article pagination? (Y/n) n
What is your time zone? [Europe/Paris] Europe/Dublin
Do you want to generate a tasks.py/Makefile to automate generation and publishing? (Y/n) n
```

How you choose to answer some of these questions will differ from myself:

After answering the pelican-quickstart interview questions your source folder will look like this:

```
blog
  ├── output
  └── source
       ├── content
       ├── output
       ├── pelicanconf.py
       └── publishconf.py
```

Here's what each of the newly created files do:

* content - a folder where website content will be stored
* output  - this folder is the default location where static website files are generated to
* pelicanconf.py - website settings file
* publishconf.py - additional website settings used only when the website is published

Now that our basic project skeleton is setup we should generate our website and preview what it looks like. First, we must tell Pelican which folder to output the website to. By default it will be generated to *blog/source/output* but we wanted them to appear in *blog/output* instead. Delete the folder blog/source/output. Now open pelicanconf.py and add the following line:

```md
OUTPUT_PATH = '../output'
```

Generate the website by using the following command while in the source folder. Ignore the warning that appears. It displays because we haven't written any articles for our website yet:

```md
pelican content
```

Finally, run the following command while in the source folder. It will setup an http server on our local machine that will allow us to preview the website.

```md
pelican --listen
```

To view our website open your web browser and go to the the address. <http://127.0.0.1:8000.>

## Installing The Pelican Bootstrap 3 Theme

In my opinion the standard theme that comes with Pelican has one huge flaw: it does not display properly on mobile devices. More than half of the world's internet traffic is mobile so we will want to use a theme that incorporates responsive web design principles. To accomplish this we will change our website to use the excellent pelican-bootstrap3 theme. To view the full listing of Pelican themes click here.

Start by creating a new folder called theme in the source folder.

```windows
blog
  └── source
       ├── content
       └── theme (new)
```

Now we need to tell Pelican where it can find the custom theme we will be using. Open pelicanconf.py and add the following line:

```python
THEME = 'theme'
```

Next, go to GitHub and download the pelican-bootstrap3 theme. Place all pelican-bootstrap3 files into the *blog/source/theme* folder so it looks like this:

```windows
blog
  └── source
       ├── content
       └── theme
           ├── static
           ├── templates
           ├── translations
           | ...(more files)
```

With the theme in place now let's attempt to generate the site.

```python
pelican content
```

Unfortunately, an error occurs.

```windows
CRITICAL: UndefinedError: '_' is undefined
```

The error is caused by a missing plugin **i18n_subsites** which is used by pelican-bootstrap3 to provide support for internationalization (i.e. i18n). We must download the **i18n_subsistes** plugin from Github and in include it in our project. To view the full listing of available Pelican plugins [click here](http://www.pelicanthemes.com).

Add another folder inside the source called **plugins**. Place the **i18n_subsites** folder and files you downloaded from Github into the **plugins** folder:

```windows
blog
  └── source
       ├── content
       ├── plugins (new)
       |   └── i18n_subsites (new)
       └── theme
```

We must tell Pelican where the **plugins** folder is located just as we did for the **theme** folder. Open pelicanconf.py and add the following line.

```md
PLUGIN_PATHS = ['plugins/', ]
```

A typical Pelican website will utilize many different plugins to extend its capabilities. Each plugin must be setup individually within pelicanconf.py. The PLUGINS variable contains all plugins being used by the website. Open pelicanconf.py and add the following line.

```md
PLUGINS = ['i18n_subsites', ]
```

Try to generate the website once again. You will get a different error this time.

```python
pelican content
```

```windows
CRITICAL: UndefinedError: 'gettext' is undefined
```

The i18n_subsites plugin relies on a language called Jinja2. To properly configure the i18n_subsites plugin we must also add the JINJA_ENVIRONMENT variable to pelicanconf.py as shown below.

```python
JINJA_ENVIRONMENT = {
    'extensions': ['jinja2.ext.i18n'],
}
```

Now that we have properly configured the bootstrap3 theme and its dependencies our website will generate successfully.

```python
pelican content
pelican --listen
```

View the latest version of our website at <http://127.0.0.1:8000.> Notice when you expand and shrink the width of the web browser window the website layout changes to fit! By selecting a theme that incorporates responsive web design principles our website will be viewable on screens of all shapes and sizes.

The pelican-bootstrap3 theme comes with several options to change the style of our website. To view the full list of available themes go the folder **blog/source/theme/css**. You will see several files with the filename *bootstrap.(some name).min.css*. We will be using the the *bootstrap.flatly.min.css* file to style our website. Open pelicanconf.py and add the following line.

```python
BOOTSTRAP_THEME = 'flatly'
```

At this time we can also change the style for code blocks we may write in our blog posts. Pelican displays code blocks using the Pygments code highlighter. To view a full list of the available Pygments styles go to the folder **blog/source/theme/css/pygments**. Our website will use *monokai.css* to style code blocks. Add the following line to pelicanconf.py.

```python
PYGMENTS_STYLE = 'monokai'
```

Let's update the sidebar too with our own preferred links and social pages. You can use the websites shown below or choose your own. Update the following line in pelicanconf.py

```python
LINKS = (('Physics on the Web', 'http://www.physics.org/'),
     ('Med Phys Links', 'https://www.aapm.org/links/medphys/'),)

SOCIAL = (('Sean_Carrol', 'https://twitter.com/seanmcarroll'),
         ('PyLinac', 'https://github.com/jrkerns/pylinac'),)
```
